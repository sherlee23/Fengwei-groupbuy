<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é”‹å‘³æ´¾ç¾é£Ÿå›¢è´­</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --primary: #FF4757;
            --secondary: #FF6B81;
        }
        body {
            font-family: 'PingFang SC', sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 15px;
            background: #f5f5f5;
        }
        .header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border-radius: 0 0 15px 15px;
            margin-bottom: 20px;
        }
        .product {
            background: white;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }
        .quantity-btn {
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
        }
        .quantity-input {
            width: 40px;
            text-align: center;
            margin: 0 8px;
        }
        .submit-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 16px;
        }
        .category-title {
            font-size: 18px;
            margin: 20px 0 10px;
            color: #333;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¢ é”‹å‘³æ´¾ç¾é£Ÿå›¢è´­</h1>
    </div>

    <form id="orderForm">
        <!-- å®¢æˆ·ä¿¡æ¯ -->
        <div style="background: white; padding: 12px; border-radius: 10px; margin-bottom: 15px;">
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ğŸ‘¤ å§“å</label>
                <input type="text" id="name" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-bottom: 12px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ğŸ“± ç”µè¯</label>
                <input type="tel" id="phone" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div>
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">ğŸšš å–è´§æ–¹å¼</label>
                <select id="delivery" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
                    <option value="">è¯·é€‰æ‹©...</option>
                    <option value="self-pickup">è‡ªå–</option>
                    <option value="lalamove">Lalamoveé€è´§</option>
                </select>
            </div>
        </div>

        <!-- å•†å“åˆ—è¡¨ -->
        <h2 class="category-title">ğŸ›’ è¯·é€‰æ‹©å•†å“</h2>

<!-- çƒ¤è‚ ç³»åˆ— -->
        <h3 class="category-title">ğŸŒ­ çƒ¤è‚ ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">åŸå‘³çƒ¤è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="åŸå‘³çƒ¤è‚ ">-</button>
                <input type="number" class="quantity-input" id="åŸå‘³çƒ¤è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="åŸå‘³çƒ¤è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">çƒŸç†èœœæ±çƒ¤è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="çƒŸç†èœœæ±çƒ¤è‚ ">-</button>
                <input type="number" class="quantity-input" id="çƒŸç†èœœæ±çƒ¤è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="çƒŸç†èœœæ±çƒ¤è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">æ³•å¼é¦™è‰çƒ¤è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="æ³•å¼é¦™è‰çƒ¤è‚ ">-</button>
                <input type="number" class="quantity-input" id="æ³•å¼é¦™è‰çƒ¤è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="æ³•å¼é¦™è‰çƒ¤è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘èƒ¡æ¤’çƒ¤è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘èƒ¡æ¤’çƒ¤è‚ ">-</button>
                <input type="number" class="quantity-input" id="é»‘èƒ¡æ¤’çƒ¤è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘èƒ¡æ¤’çƒ¤è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">å­œç„¶è„†éª¨çƒ¤è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="å­œç„¶è„†éª¨çƒ¤è‚ ">-</button>
                <input type="number" class="quantity-input" id="å­œç„¶è„†éª¨çƒ¤è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="å­œç„¶è„†éª¨çƒ¤è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">èŠå£«ç‰ç±³çƒ¤è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="èŠå£«ç‰ç±³çƒ¤è‚ ">-</button>
                <input type="number" class="quantity-input" id="èŠå£«ç‰ç±³çƒ¤è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="èŠå£«ç‰ç±³çƒ¤è‚ ">+</button>
            </div>
        </div>

        <!-- è™¾è‚ &è™¾é¥¼ç³»åˆ— -->
        <h3 class="category-title">ğŸ¦ è™¾è‚ &è™¾é¥¼ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">åŸå‘³è™¾è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM33</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="åŸå‘³è™¾è‚ ">-</button>
                <input type="number" class="quantity-input" id="åŸå‘³è™¾è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="åŸå‘³è™¾è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">è¾£å‘³è™¾è‚ </span>
                <span style="color: var(--primary); font-weight: bold;">RM33</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="è¾£å‘³è™¾è‚ ">-</button>
                <input type="number" class="quantity-input" id="è¾£å‘³è™¾è‚ " value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="è¾£å‘³è™¾è‚ ">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">è™¾é¥¼</span>
                <span style="color: var(--primary); font-weight: bold;">RM28</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="è™¾é¥¼">-</button>
                <input type="number" class="quantity-input" id="è™¾é¥¼" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="è™¾é¥¼">+</button>
            </div>
        </div>

        <!-- æŠ«è¨ç³»åˆ— -->
        <h3 class="category-title">ğŸ• æŠ«è¨ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">ç›æ ¼ä¸½ç‰¹æŠ«è¨</span>
                <span style="color: var(--primary); font-weight: bold;">RM25</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="ç›æ ¼ä¸½ç‰¹æŠ«è¨">-</button>
                <input type="number" class="quantity-input" id="ç›æ ¼ä¸½ç‰¹æŠ«è¨" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="ç›æ ¼ä¸½ç‰¹æŠ«è¨">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘æ¤’ç‰›è‚‰æŠ«è¨</span>
                <span style="color: var(--primary); font-weight: bold;">RM25</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘æ¤’ç‰›è‚‰æŠ«è¨">-</button>
                <input type="number" class="quantity-input" id="é»‘æ¤’ç‰›è‚‰æŠ«è¨" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘æ¤’ç‰›è‚‰æŠ«è¨">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">å¥¥å°”è‰¯é¸¡è‚‰æŠ«è¨</span>
                <span style="color: var(--primary); font-weight: bold;">RM25</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="å¥¥å°”è‰¯é¸¡è‚‰æŠ«è¨">-</button>
                <input type="number" class="quantity-input" id="å¥¥å°”è‰¯é¸¡è‚‰æŠ«è¨" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="å¥¥å°”è‰¯é¸¡è‚‰æŠ«è¨">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">åŒæ–™æ¦´è²æŠ«è¨</span>
                <span style="color: var(--primary); font-weight: bold;">RM40</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="åŒæ–™æ¦´è²æŠ«è¨">-</button>
                <input type="number" class="quantity-input" id="åŒæ–™æ¦´è²æŠ«è¨" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="åŒæ–™æ¦´è²æŠ«è¨">+</button>
            </div>
        </div>

        <!-- é…¥é¥¼ç³»åˆ— -->
        <h3 class="category-title">ğŸ¥® é…¥é¥¼ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘çŒªè‚‰é…¥é¥¼</span>
                <span style="color: var(--primary); font-weight: bold;">RM55</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘çŒªè‚‰é…¥é¥¼">-</button>
                <input type="number" class="quantity-input" id="é»‘çŒªè‚‰é…¥é¥¼" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘çŒªè‚‰é…¥é¥¼">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">å®‰æ ¼æ–¯ç‰›è‚‰é…¥é¥¼</span>
                <span style="color: var(--primary); font-weight: bold;">RM55</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="å®‰æ ¼æ–¯ç‰›è‚‰é…¥é¥¼">-</button>
                <input type="number" class="quantity-input" id="å®‰æ ¼æ–¯ç‰›è‚‰é…¥é¥¼" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="å®‰æ ¼æ–¯ç‰›è‚‰é…¥é¥¼">+</button>
            </div>
        </div>

        <!-- å°ç¬¼æ±¤åŒ…ç³»åˆ— -->
        <h3 class="category-title">ğŸ¥Ÿ å°ç¬¼æ±¤åŒ…ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é²œè‚‰å°ç¬¼æ±¤åŒ…</span>
                <span style="color: var(--primary); font-weight: bold;">RM12</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é²œè‚‰å°ç¬¼æ±¤åŒ…">-</button>
                <input type="number" class="quantity-input" id="é²œè‚‰å°ç¬¼æ±¤åŒ…" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é²œè‚‰å°ç¬¼æ±¤åŒ…">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">èŒè‡å°ç¬¼æ±¤åŒ…</span>
                <span style="color: var(--primary); font-weight: bold;">RM12</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="èŒè‡å°ç¬¼æ±¤åŒ…">-</button>
                <input type="number" class="quantity-input" id="èŒè‡å°ç¬¼æ±¤åŒ…" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="èŒè‡å°ç¬¼æ±¤åŒ…">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘æ¾éœ²å°ç¬¼æ±¤åŒ…</span>
                <span style="color: var(--primary); font-weight: bold;">RM12</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘æ¾éœ²å°ç¬¼æ±¤åŒ…">-</button>
                <input type="number" class="quantity-input" id="é»‘æ¾éœ²å°ç¬¼æ±¤åŒ…" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘æ¾éœ²å°ç¬¼æ±¤åŒ…">+</button>
            </div>
        </div>

        <!-- é¸¡æ’ç³»åˆ— -->
        <h3 class="category-title">ğŸ— é¸¡æ’ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">åŸå‘³é¸¡æ’</span>
                <span style="color: var(--primary); font-weight: bold;">RM20</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="åŸå‘³é¸¡æ’">-</button>
                <input type="number" class="quantity-input" id="åŸå‘³é¸¡æ’" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="åŸå‘³é¸¡æ’">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">å¥¥å°”è‰¯é¸¡æ’</span>
                <span style="color: var(--primary); font-weight: bold;">RM20</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="å¥¥å°”è‰¯é¸¡æ’">-</button>
                <input type="number" class="quantity-input" id="å¥¥å°”è‰¯é¸¡æ’" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="å¥¥å°”è‰¯é¸¡æ’">+</button>
            </div>
        </div>

        <!-- é¸¡ç¿…ç³»åˆ— -->
        <h3 class="category-title">ğŸ— é¸¡ç¿…ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">å¥¥å°”è‰¯é¸¡ç¿…</span>
                <span style="color: var(--primary); font-weight: bold;">RM25</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="å¥¥å°”è‰¯é¸¡ç¿…">-</button>
                <input type="number" class="quantity-input" id="å¥¥å°”è‰¯é¸¡ç¿…" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="å¥¥å°”è‰¯é¸¡ç¿…">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é’èŠ±æ¤’é¸¡ç¿…</span>
                <span style="color: var(--primary); font-weight: bold;">RM25</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é’èŠ±æ¤’é¸¡ç¿…">-</button>
                <input type="number" class="quantity-input" id="é’èŠ±æ¤’é¸¡ç¿…" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é’èŠ±æ¤’é¸¡ç¿…">+</button>
            </div>
        </div>

        <!-- çº¸çš®çƒ§å–ç³»åˆ— -->
        <h3 class="category-title">ğŸ¥Ÿ çº¸çš®çƒ§å–ç³»åˆ—</h3>
        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘çŒªä¸‰ä¸çº¸çš®çƒ§å–</span>
                <span style="color: var(--primary); font-weight: bold;">RM15</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘çŒªä¸‰ä¸çº¸çš®çƒ§å–">-</button>
                <input type="number" class="quantity-input" id="é»‘çŒªä¸‰ä¸çº¸çš®çƒ§å–" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘çŒªä¸‰ä¸çº¸çš®çƒ§å–">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘æ¤’ç‰›è‚‰çº¸çš®çƒ§å–</span>
                <span style="color: var(--primary); font-weight: bold;">RM15</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘æ¤’ç‰›è‚‰çº¸çš®çƒ§å–">-</button>
                <input type="number" class="quantity-input" id="é»‘æ¤’ç‰›è‚‰çº¸çš®çƒ§å–" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘æ¤’ç‰›è‚‰çº¸çš®çƒ§å–">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">é»‘çŒªæ¢…èœå¹²çº¸çš®çƒ§å–</span>
                <span style="color: var(--primary); font-weight: bold;">RM15</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="é»‘çŒªæ¢…èœå¹²çº¸çš®çƒ§å–">-</button>
                <input type="number" class="quantity-input" id="é»‘çŒªæ¢…èœå¹²çº¸çš®çƒ§å–" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="é»‘çŒªæ¢…èœå¹²çº¸çš®çƒ§å–">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">ä¸‰ä¸èŠå£«çº¸çš®çƒ§å–</span>
                <span style="color: var(--primary); font-weight: bold;">RM15</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="ä¸‰ä¸èŠå£«çº¸çš®çƒ§å–">-</button>
                <input type="number" class="quantity-input" id="ä¸‰ä¸èŠå£«çº¸çš®çƒ§å–" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="ä¸‰ä¸èŠå£«çº¸çš®çƒ§å–">+</button>
            </div>
        </div>

        <div class="product">
            <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: bold;">ä¹Œç±³è…Šå‘³çº¸çš®çƒ§å–</span>
                <span style="color: var(--primary); font-weight: bold;">RM15</span>
            </div>
            <div class="quantity-control">
                <button type="button" class="quantity-btn minus" data-product="ä¹Œç±³è…Šå‘³çº¸çš®çƒ§å–">-</button>
                <input type="number" class="quantity-input" id="ä¹Œç±³è…Šå‘³çº¸çš®çƒ§å–" value="0" min="0">
                <button type="button" class="quantity-btn plus" data-product="ä¹Œç±³è…Šå‘³çº¸çš®çƒ§å–">+</button>
            </div>
        </div>

<!-- æ”¯ä»˜å‡­è¯ä¸Šä¼  -->
        <div style="background: white; padding: 12px; border-radius: 10px; margin-top: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: bold;">ğŸ’³ æ”¯ä»˜å‡­è¯ï¼ˆå¿…ä¼ ï¼‰</label>
            <input type="file" id="payment" accept="image/*,.pdf" required 
                   style="width: 100%; padding: 8px; border: 1px dashed #ddd; border-radius: 6px;">
            <p style="font-size: 12px; color: #666; margin-top: 5px;">è¯·ä¸Šä¼ è½¬è´¦æˆªå›¾æˆ–PDFå‡­è¯</p>
        </div>

        <!-- è®¢å•æ€»é¢æ˜¾ç¤º -->
        <div style="background: white; padding: 12px; border-radius: 10px; margin: 15px 0; text-align: right;">
            <span style="font-weight: bold;">è®¢å•æ€»é¢ï¼š</span>
            <span id="totalAmount" style="color: var(--primary); font-weight: bold; font-size: 18px;">RM0</span>
        </div>

        <!-- æäº¤æŒ‰é’® -->
        <button type="submit" class="submit-btn">
            <span style="font-size: 18px;">ğŸš€</span> ç¡®è®¤æäº¤è®¢å•
        </button>
    </form>

<script>
        // åˆå§‹åŒ–Supabase
        const supabase = supabase.createClient(
            'https://edfnhhthztskuuosuasw.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVkZm5oaHRoenRza3V1b3N1YXN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5OTYxMTYsImV4cCI6MjA2NTU3MjExNn0.O3g2gjvsWagmWgmzoeJA8mPampvLYJr-KgqVwXsKoAo'
        );

        // å•†å“ä»·æ ¼è¡¨ï¼ˆ27ä¸ªå•†å“ï¼‰
        const productPrices = {
            'åŸå‘³çƒ¤è‚ ': 28,
            'çƒŸç†èœœæ±çƒ¤è‚ ': 28,
            'æ³•å¼é¦™è‰çƒ¤è‚ ': 28,
            'é»‘èƒ¡æ¤’çƒ¤è‚ ': 28,
            'å­œç„¶è„†éª¨çƒ¤è‚ ': 28,
            'èŠå£«ç‰ç±³çƒ¤è‚ ': 28,
            'åŸå‘³è™¾è‚ ': 33,
            'è¾£å‘³è™¾è‚ ': 33,
            'è™¾é¥¼': 28,
            'ç›æ ¼ä¸½ç‰¹æŠ«è¨': 25,
            'é»‘æ¤’ç‰›è‚‰æŠ«è¨': 25,
            'å¥¥å°”è‰¯é¸¡è‚‰æŠ«è¨': 25,
            'åŒæ–™æ¦´è²æŠ«è¨': 40,
            'é»‘çŒªè‚‰é…¥é¥¼': 55,
            'å®‰æ ¼æ–¯ç‰›è‚‰é…¥é¥¼': 55,
            'é²œè‚‰å°ç¬¼æ±¤åŒ…': 12,
            'èŒè‡å°ç¬¼æ±¤åŒ…': 12,
            'é»‘æ¾éœ²å°ç¬¼æ±¤åŒ…': 12,
            'åŸå‘³é¸¡æ’': 20,
            'å¥¥å°”è‰¯é¸¡æ’': 20,
            'å¥¥å°”è‰¯é¸¡ç¿…': 25,
            'é’èŠ±æ¤’é¸¡ç¿…': 25,
            'é»‘çŒªä¸‰ä¸çº¸çš®çƒ§å–': 15,
            'é»‘æ¤’ç‰›è‚‰çº¸çš®çƒ§å–': 15,
            'é»‘çŒªæ¢…èœå¹²çº¸çš®çƒ§å–': 15,
            'ä¸‰ä¸èŠå£«çº¸çš®çƒ§å–': 15,
            'ä¹Œç±³è…Šå‘³çº¸çš®çƒ§å–': 15
        };

        // æ•°é‡æ§åˆ¶
        document.addEventListener('click', function(e) {
            const btn = e.target.closest('.quantity-btn');
            if (!btn) return;
            
            const input = document.getElementById(btn.dataset.product);
            let value = parseInt(input.value) || 0;
            input.value = btn.classList.contains('plus') ? value + 1 : Math.max(0, value - 1);
        });

        // æäº¤è®¢å•
        document.getElementById('orderForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            try {
                // 1. æ”¶é›†è®¢å•å•†å“
                const orderItems = [];
                let total = 0;
                
                for (const [product, price] of Object.entries(productPrices)) {
                    const qty = parseInt(document.getElementById(product).value) || 0;
                    if (qty > 0) {
                        orderItems.push({ product, quantity: qty, price });
                        total += qty * price;
                    }
                }
                
                if (orderItems.length === 0) {
                    alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä»¶å•†å“');
                    return;
                }
                
                // 2. ä¸Šä¼ æ”¯ä»˜å‡­è¯
                const paymentFile = document.getElementById('payment').files[0];
                let paymentUrl = '';
                
                if (paymentFile) {
                    const fileExt = paymentFile.name.split('.').pop();
                    const fileName = `${Date.now()}.${fileExt}`;
                    
                    const { error: uploadError } = await supabase.storage
                        .from('payment-proofs')
                        .upload(fileName, paymentFile);
                    
                    if (uploadError) throw uploadError;
                    
                    paymentUrl = `${supabase.supabaseUrl}/storage/v1/object/public/payment-proofs/${fileName}`;
                }
                
                // 3. æäº¤è®¢å•
                const { error } = await supabase.from('orders').insert({
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    delivery_method: document.getElementById('delivery').value,
                    order_items: orderItems,
                    total_amount: total,
                    payment_proof_url: paymentUrl,
                    created_at: new Date().toISOString()
                });
                
                if (error) throw error;
                
                alert('è®¢å•æäº¤æˆåŠŸï¼');
                document.getElementById('orderForm').reset();
                document.querySelectorAll('.quantity-input').forEach(input => input.value = 0);
                
            } catch (err) {
                console.error(err);
                alert('æäº¤å¤±è´¥: ' + (err.message || 'è¯·ç¨åé‡è¯•'));
            }
        });
    </script>
</body>
</html>